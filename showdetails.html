<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Show Pet Details</title>
  <script src="https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js"></script>

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #ffd6d6, #ffecc7);
      padding: 40px;
      text-align: center;
    }
    h2 {
      color: #333;
    }
    input {
      width: 300px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      margin-top: 15px;
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 30px;
    }
    .card {
      background-color: white;
      border-radius: 15px;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.2);
      width: 350px;
      padding: 20px;
      text-align: left;
      margin-bottom: 15px;
    }
    .card h3 {
      margin: 0;
      color: #444;
    }
    button {
      background-color: #007BFF;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 8px;
      margin-top: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    .back-btn {
      background-color: #28a745;
      margin-bottom: 20px;
    }
    .back-btn:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>

  <h2>Pet List</h2>
  <button class="back-btn" onclick="location.href='index.html'">Add More Pets</button>
  <br>
  <input type="text" id="searchBox" placeholder="Search pet by name..." onkeyup="searchPet()">

  <div class="container" id="petContainer"></div>

  <script type="module">
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAH5I_sIv9EIpbVf6boMqb5RMomfkaXaS0",
  authDomain: "petdetails-fd3e9.firebaseapp.com",
  databaseURL: "https://petdetails-fd3e9-default-rtdb.firebaseio.com",
  projectId: "petdetails-fd3e9",
  storageBucket: "petdetails-fd3e9.firebasestorage.app",
  messagingSenderId: "788205084009",
  appId: "1:788205084009:web:0c9ba295b715d79c86f1f8",
  measurementId: "G-9L7947EZZ6"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const petList = document.getElementById("petList");
    const searchInput = document.getElementById("search");

    async function loadPets() {
      const snapshot = await db.collection("pets").get();
      const pets = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      displayPets(pets);
    }

    function displayPets(pets) {
      petList.innerHTML = "";
      pets.forEach(pet => {
        const div = document.createElement("div");
        div.className = "pet-card";
        div.innerHTML = `
          <h3>${pet.name}</h3>
          <button onclick="showMore('${pet.id}')">Show More</button>
          <div id="details-${pet.id}" style="display:none; margin-top:10px;">
            <p><b>Age:</b> ${pet.age}</p>
            <p><b>Weight:</b> ${pet.weight} kg</p>
            <p><b>Type:</b> ${pet.type}</p>
            <p><b>Likes:</b> ${pet.likes}</p>
          </div>
        `;
        petList.appendChild(div);
      });
    }

    window.showMore = (id) => {
      const details = document.getElementById(`details-${id}`);
      details.style.display = details.style.display === "none" ? "block" : "none";
    };

    searchInput.addEventListener("input", async () => {
      const term = searchInput.value.toLowerCase();
      const snapshot = await db.collection("pets").get();
      const pets = snapshot.docs
        .map(doc => ({ id: doc.id, ...doc.data() }))
        .filter(p => p.name.toLowerCase().includes(term));
      displayPets(pets);
    });

    loadPets();
  </script>

</body>
</html>


